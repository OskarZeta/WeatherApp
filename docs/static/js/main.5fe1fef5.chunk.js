(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,a){e.exports=a(63)},33:function(e,t,a){},35:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var r=a(0),c=a.n(r),n=a(23),l=a.n(n),i=a(66),s=(a(33),a(35),a(8)),o=a(9),m=a(14),d=a(10),u=a(15),h=a(6),p=a(27),f=a(68),v=a(65),_=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"lds-ring"},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null))}}]),t}(r.Component),E=a(64),y=a(67),w=function(e){return c.a.createElement("div",{className:"header__search-wrapper col-8 col-sm-8 col-md-8"},c.a.createElement("input",{className:"header__search-field form-control",type:"search"}),c.a.createElement("button",{className:"header__search-btn",onClick:e.clickHandler},c.a.createElement("span",{className:"header__search-text"},"Search city"),c.a.createElement("svg",{className:"header__search-icon header__icon",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 512 512"},c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("path",{d:"M310,190c-5.52,0-10,4.48-10,10s4.48,10,10,10c5.52,0,10-4.48,10-10S315.52,190,310,190z"}))),c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("path",{d:"M500.281,443.719l-133.48-133.48C388.546,277.485,400,239.555,400,200C400,89.72,310.28,0,200,0S0,89.72,0,200\r s89.72,200,200,200c39.556,0,77.486-11.455,110.239-33.198l36.895,36.895c0.005,0.005,0.01,0.01,0.016,0.016l96.568,96.568\r C451.276,507.838,461.319,512,472,512c10.681,0,20.724-4.162,28.278-11.716C507.837,492.731,512,482.687,512,472\r S507.837,451.269,500.281,443.719z M305.536,345.727c0,0.001-0.001,0.001-0.002,0.002C274.667,368.149,238.175,380,200,380\r c-99.252,0-180-80.748-180-180S100.748,20,200,20s180,80.748,180,180c0,38.175-11.851,74.667-34.272,105.535\r C334.511,320.988,320.989,334.511,305.536,345.727z M326.516,354.793c10.35-8.467,19.811-17.928,28.277-28.277l28.371,28.371\r c-8.628,10.183-18.094,19.65-28.277,28.277L326.516,354.793z M486.139,486.139c-3.78,3.78-8.801,5.861-14.139,5.861\r s-10.359-2.081-14.139-5.861l-88.795-88.795c10.127-8.691,19.587-18.15,28.277-28.277l88.798,88.798\r C489.919,461.639,492,466.658,492,472C492,477.342,489.919,482.361,486.139,486.139z"}))),c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("path",{d:"M200,40c-88.225,0-160,71.775-160,160s71.775,160,160,160s160-71.775,160-160S288.225,40,200,40z M200,340\r c-77.196,0-140-62.804-140-140S122.804,60,200,60s140,62.804,140,140S277.196,340,200,340z"}))),c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("path",{d:"M312.065,157.073c-8.611-22.412-23.604-41.574-43.36-55.413C248.479,87.49,224.721,80,200,80c-5.522,0-10,4.478-10,10\r c0,5.522,4.478,10,10,10c41.099,0,78.631,25.818,93.396,64.247c1.528,3.976,5.317,6.416,9.337,6.416\r c1.192,0,2.405-0.215,3.584-0.668C311.472,168.014,314.046,162.229,312.065,157.073z"}))))))},b=Object(y.a)(function(e){return c.a.createElement("button",{className:"header__btn header__btn--home",onClick:e.clickHandler},c.a.createElement("span",{className:"header__btn-text"},"Home city"),c.a.createElement("svg",{className:"header__icon",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 60 60"},c.a.createElement("g",null,c.a.createElement("path",{d:"M44.394,13.091L8.633,29.503c-0.399,0.184-0.632,0.605-0.574,1.041s0.393,0.782,0.826,0.854l15.833,2.653l1.809,14.95\r c0.054,0.438,0.389,0.791,0.824,0.865c0.057,0.01,0.113,0.015,0.169,0.015c0.375,0,0.726-0.211,0.896-0.556l17.291-34.882\r c0.188-0.38,0.117-0.837-0.178-1.141S44.776,12.914,44.394,13.091z M28.11,45.438l-1.496-12.369\r c-0.054-0.44-0.391-0.793-0.828-0.866l-13.362-2.239L42.66,16.087L28.11,45.438z"}),c.a.createElement("path",{d:"M30,0C13.458,0,0,13.458,0,30s13.458,30,30,30s30-13.458,30-30S46.542,0,30,0z M30,58C14.561,58,2,45.439,2,30\r S14.561,2,30,2s28,12.561,28,28S45.439,58,30,58z"}))))}),g=Object(y.a)(function(e){return c.a.createElement("header",{className:"header"},c.a.createElement("div",{className:"container"},c.a.createElement("h1",null,"WeatherApp"),c.a.createElement("div",{className:"header__wrapper"},c.a.createElement(w,{clickHandler:e.searchClick,history:e.history}),c.a.createElement("div",{className:"header__wrapper-lower col-4 col-sm-4 col-md-4"},c.a.createElement(b,{clickHandler:e.loadDefaultCity}),c.a.createElement(E.a,{className:"header__btn header__btn--favorites",to:"/favorites"},c.a.createElement("span",{className:"header__btn-text"},"Favorites"),c.a.createElement("svg",{className:"header__icon",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 55.867 55.867"},c.a.createElement("path",{d:"M11.287,54.548c-0.207,0-0.414-0.064-0.588-0.191c-0.308-0.224-0.462-0.603-0.397-0.978l3.091-18.018L0.302,22.602\r c-0.272-0.266-0.37-0.663-0.253-1.024c0.118-0.362,0.431-0.626,0.808-0.681l18.09-2.629l8.091-16.393\r c0.168-0.342,0.516-0.558,0.896-0.558l0,0c0.381,0,0.729,0.216,0.896,0.558l8.09,16.393l18.091,2.629\r c0.377,0.055,0.689,0.318,0.808,0.681c0.117,0.361,0.02,0.759-0.253,1.024L42.475,35.363l3.09,18.017\r c0.064,0.375-0.09,0.754-0.397,0.978c-0.308,0.226-0.717,0.255-1.054,0.076l-16.18-8.506l-16.182,8.506\r C11.606,54.51,11.446,54.548,11.287,54.548z M3.149,22.584l12.016,11.713c0.235,0.229,0.343,0.561,0.287,0.885L12.615,51.72\r l14.854-7.808c0.291-0.154,0.638-0.154,0.931,0l14.852,7.808l-2.836-16.538c-0.056-0.324,0.052-0.655,0.287-0.885l12.016-11.713\r l-16.605-2.413c-0.326-0.047-0.607-0.252-0.753-0.547L27.934,4.578l-7.427,15.047c-0.146,0.295-0.427,0.5-0.753,0.547L3.149,22.584z"})))))))}),N=function(e){return c.a.createElement("header",{className:"header"},c.a.createElement("div",{className:"container"},c.a.createElement("h1",null,"WeatherApp"),c.a.createElement("div",{className:"header__wrapper"},c.a.createElement(E.a,{className:"header__btn header__btn--homepage",to:"/"},c.a.createElement("span",{className:"header__btn-text"},"Home")))))},C=function(e){return c.a.createElement("div",null,!e.isFavorite&&c.a.createElement("button",{className:"fav-btn",onClick:function(){e.clickHandler(e.id)}},c.a.createElement("svg",{className:"fav-btn__svg",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 511.999 511.999"},c.a.createElement("path",{style:{fill:"#FFDC64"},d:"M452.71,157.937l-133.741-12.404L265.843,22.17c-3.72-8.638-15.967-8.638-19.686,0l-53.126,123.362\r L59.29,157.937c-9.365,0.868-13.149,12.516-6.084,18.723l100.908,88.646l-29.531,131.029c-2.068,9.175,7.841,16.373,15.927,11.572\r L256,339.331l115.49,68.576c8.087,4.802,17.994-2.397,15.927-11.572l-29.532-131.029l100.909-88.646\r C465.859,170.453,462.074,158.805,452.71,157.937z"}),c.a.createElement("g",null,c.a.createElement("path",{style:{fill:"#FFF082"},d:"M119.278,17.923c6.818,9.47,26.062,50.14,37.064,73.842c1.73,3.726-2.945,7.092-5.93,4.269\r C131.425,78.082,98.96,46.93,92.142,37.459c-5.395-7.493-3.694-17.941,3.8-23.336C103.435,8.728,113.883,10.43,119.278,17.923z"}),c.a.createElement("path",{style:{fill:"#FFF082"},d:"M392.722,17.923c-6.818,9.47-26.062,50.14-37.064,73.842c-1.73,3.726,2.945,7.092,5.93,4.269\r c18.987-17.952,51.451-49.105,58.27-58.575c5.395-7.493,3.694-17.941-3.8-23.336C408.565,8.728,398.117,10.43,392.722,17.923z"}),c.a.createElement("path",{style:{fill:"#FFF082"},d:"M500.461,295.629c-11.094-3.618-55.689-9.595-81.612-12.875c-4.075-0.516-5.861,4.961-2.266,6.947\r c22.873,12.635,62.416,34.099,73.51,37.717c8.778,2.863,18.215-1.932,21.078-10.711\r C514.034,307.928,509.239,298.492,500.461,295.629z"}),c.a.createElement("path",{style:{fill:"#FFF082"},d:"M11.539,295.629c11.094-3.618,55.689-9.595,81.612-12.875c4.075-0.516,5.861,4.961,2.266,6.947\r c-22.873,12.635-62.416,34.099-73.51,37.717c-8.778,2.863-18.215-1.932-21.078-10.711S2.761,298.492,11.539,295.629z"}),c.a.createElement("path",{style:{fill:"#FFF082"},d:"M239.794,484.31c0-11.669,8.145-55.919,13.065-81.582c0.773-4.034,6.534-4.034,7.307,0\r c4.92,25.663,13.065,69.913,13.065,81.582c0,9.233-7.485,16.718-16.718,16.718C247.279,501.029,239.794,493.543,239.794,484.31z"})),c.a.createElement("path",{style:{fill:"#FFC850"},d:"M285.161,67.03l-19.319-44.86c-3.72-8.638-15.967-8.638-19.686,0L193.03,145.532L59.29,157.937\r c-9.365,0.868-13.149,12.516-6.084,18.723l100.908,88.646l-29.531,131.029c-2.068,9.175,7.841,16.373,15.927,11.572l15.371-9.127\r C181.08,235.66,251.922,115.918,285.161,67.03z"})),c.a.createElement("span",{className:"fav-btn__text"},"Add to favorites")),e.isFavorite&&c.a.createElement("button",{className:"fav-btn fav-btn--active",onClick:function(){e.clickHandler(e.id)}},c.a.createElement("svg",{className:"fav-btn__svg",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 512 512"},c.a.createElement("circle",{style:{fill:"#E21B1B"},cx:"256",cy:"256",r:"256"}),c.a.createElement("path",{style:{fill:"#C40606"},d:"M510.28,285.304L367.912,142.936L150.248,368.608l140.928,140.928\r C406.352,493.696,497.056,401.288,510.28,285.304z"}),c.a.createElement("g",null,c.a.createElement("path",{style:{fill:"#FFFFFF"},d:"M354.376,371.536c-5.12,0-10.232-1.952-14.144-5.856L146.408,171.848\r c-7.816-7.816-7.816-20.472,0-28.28s20.472-7.816,28.28,0L368.52,337.4c7.816,7.816,7.816,20.472,0,28.28\r C364.608,369.584,359.496,371.536,354.376,371.536z"}),c.a.createElement("path",{style:{fill:"#FFFFFF"},d:"M160.544,371.536c-5.12,0-10.232-1.952-14.144-5.856c-7.816-7.816-7.816-20.472,0-28.28\r l193.832-193.832c7.816-7.816,20.472-7.816,28.28,0s7.816,20.472,0,28.28L174.688,365.68\r C170.784,369.584,165.664,371.536,160.544,371.536z"}))),c.a.createElement("span",{className:"fav-btn__text"},"Remove from favorites")))},F=function(e){var t=e.weather;return c.a.createElement("li",{className:"city__future"},c.a.createElement("span",{className:"city__future-date"},k(t.dt_txt.split(" ")[0],"short")),c.a.createElement("img",{className:"city__future-icon",src:M+t.weather[0].icon+".png",alt:"weather-icon"}),c.a.createElement("div",{className:"city__future-weather"},c.a.createElement("span",{className:"city__future-temp"},x(t.main.temp)),c.a.createElement("span",{className:"city__future-description"},t.weather[0].description)))},x=function(e){var t=Math.round(e-273);return t>0?"+".concat(t," \xb0C"):"".concat(t," \xb0C")},k=function(e,t){var a;return"full"===t?(a=["January","February","March","April","May","June","Jule","August","September","October","November","December"],"".concat(e.split("-")[2]," of ").concat(a[e.split("-")[1]-1],", ").concat(e.split("-")[0])):(a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"".concat(e.split("-")[2]," of ").concat(a[e.split("-")[1]-1]))},M="https://openweathermap.org/img/w/",S=function(e){return e<=253?"#bbd8ff":e<273&&e>253?"#d1ecff":e>=283&&e<293?"#ffe2d4":e>293?"#ffcf8b":"#ebebeb"},O=function(e){var t=e.weather[0],a=e.weather.filter(function(e){return!e.dt_txt.includes(t.dt_txt.split(" ")[0])}),r=a.filter(function(t){return t.dt_txt.includes("15:00:00")&&!t.dt_txt.includes(e.weather[e.weather.length-1].dt_txt.split(" ")[0])}),n=a.filter(function(t){return t.dt_txt.includes(e.weather[e.weather.length-1].dt_txt.split(" ")[0])}),l=n.find(function(e){return"12:00:00"===e.dt_txt.split(" ")[1]})||n[n.length-1];return c.a.createElement("div",{className:"city"},c.a.createElement("div",{className:"container city__container",style:{boxShadow:"0px 15px 10px 10px"+S(t.main.temp)}},c.a.createElement("div",{className:"city__header"},c.a.createElement("div",{className:"city__header-wrapper"},c.a.createElement("span",null,"Current city:"),c.a.createElement("h3",{className:"city__header-name"},e.name,", ",e.country)),c.a.createElement(C,{isFavorite:e.isFavorite,clickHandler:e.clickHandler})),c.a.createElement("div",{className:"city__wrapper"},c.a.createElement("div",{className:"city__current-wrapper",style:{borderBottom:"5px solid"+S(t.main.temp)}},c.a.createElement("span",{className:"city__current-date"},k(t.dt_txt.split(" ")[0],"full")),c.a.createElement("div",{className:"city__weather-wrapper"},c.a.createElement("img",{className:"city__weather-icon",src:M+t.weather[0].icon+".png",alt:"weather-icon"}),c.a.createElement("div",{className:"city__weather-description"},c.a.createElement("span",null,t.weather[0].description),c.a.createElement("span",{className:"city__weather-temp"},x(t.main.temp)))),c.a.createElement("div",{className:"city__weather-params-wrapper"},c.a.createElement("div",{className:"city__weather-param"},c.a.createElement("span",{className:"city__weather-param-name"},"wind:"),c.a.createElement("span",{className:"city__weather-param-value"},t.wind.speed," meters/sec")),c.a.createElement("div",{className:"city__weather-param"},c.a.createElement("span",{className:"city__weather-param-name"},"pressure:"),c.a.createElement("span",{className:"city__weather-param-value"},Math.round(t.main.pressure/1.33)," mmHg")),c.a.createElement("div",{className:"city__weather-param"},c.a.createElement("span",{className:"city__weather-param-name"},"humidity:"),c.a.createElement("span",{className:"city__weather-param-value"},t.main.humidity," %")))),c.a.createElement("ul",{className:"city__forecast-wrapper"},r.map(function(e,t){return c.a.createElement(F,{key:t,weather:e})}),c.a.createElement(F,{weather:l})))))},z=function(e){return c.a.createElement("div",null,c.a.createElement("button",{className:"favorites__btn favorites__btn--remove",onClick:function(){e.clickHandler(e.id)}},c.a.createElement("span",{className:"favorites__btn-text"},"Remove from favorites")))},H=Object(y.a)(function(e){return c.a.createElement("div",{className:"favorites__item-wrapper"},c.a.createElement("h5",{className:"favorites__item-header"},e.name),c.a.createElement("div",{className:"favorites__buttons-wrapper"},c.a.createElement("button",{className:"favorites__btn favorites__btn--show",onClick:function(){return e.showFavoriteCity(e)}},c.a.createElement("span",{className:"favorites__btn-text"},"Show city")),c.a.createElement(z,{id:e.id,clickHandler:e.favoritesHandler})))}),j=function(e){return c.a.createElement("div",{className:"container favorites__container"},c.a.createElement("h2",null,"Favorite cities"),0===e.favorites.length&&c.a.createElement("div",null,"You don't have any favorites yet"),0!==e.favorites.length&&c.a.createElement("ul",{className:"favorites"},e.favorites.map(function(t){return c.a.createElement("li",{key:t.id,className:"favorites__item"},c.a.createElement(H,{id:t.id,name:t.name,country:t.country,lon:t.lon,lat:t.lat,isFavorite:t.isFavorite,favoritesHandler:e.favoritesHandler,showFavoriteCity:e.showFavoriteCity}))})))},L=a(26),D=a.n(L),B="4eb2a505a495b93451e7abc17924062b",J={id:2643743,name:"London",country:"GB",lon:-.12574,lat:51.50853,isFavorite:!1},A=Object(p.a)({},J,{weather:[],favorites:JSON.parse(localStorage.getItem("favorites"))||[],loading:!0,error:!1}),q=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state=A,a.searchClick=a.searchClick.bind(Object(h.a)(Object(h.a)(a))),a.favoritesHandler=a.favoritesHandler.bind(Object(h.a)(Object(h.a)(a))),a.showFavoriteCity=a.showFavoriteCity.bind(Object(h.a)(Object(h.a)(a))),a.loadDefaultCity=a.loadDefaultCity.bind(Object(h.a)(Object(h.a)(a))),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"fetchData",value:function(e){var t,a=this;switch(this.setState({loading:!0,error:!1}),e.name){case"geo":t="https://api.openweathermap.org/data/2.5/forecast?lat=".concat(e.lat,"&lon=").concat(e.lon,"&appid=").concat(B);break;case"id":t="https://api.openweathermap.org/data/2.5/forecast?id=".concat(e.id,"&appid=").concat(B);break;case"query":t="https://api.openweathermap.org/data/2.5/forecast?q=".concat(e.query,"&appid=").concat(B);break;default:throw new Error("Wrong fetching data method detected, expected geo/id/query in method's name, got ".concat(e.name))}D.a.get(t).then(function(e){a.setState(function(t){return{id:e.data.city.id,name:e.data.city.name,country:e.data.city.country,lon:e.data.city.coord.lon,lat:e.data.city.coord.lat,isFavorite:0!==t.favorites.length&&!!t.favorites.find(function(t){return t.id===e.data.city.id}),weather:e.data.list,loading:!1,error:!1}})}).catch(function(e){console.log(e),a.setState({loading:!1,error:!0})})}},{key:"searchClick",value:function(){var e=document.querySelector(".header__search-field");this.fetchData({name:"query",query:e.value})}},{key:"favoritesHandler",value:function(e){e?(this.state.id===e&&this.setState({isFavorite:!1}),this.setState(function(t){var a=t.favorites.indexOf(t.favorites.find(function(t){return t.id===e}));return t.favorites.splice(a,1)})):(this.state.isFavorite?this.setState(function(e){var t=e.favorites.indexOf(e.favorites.find(function(t){return t.id===e.id}));e.favorites.splice(t,1)}):this.setState(function(e){e.favorites.push({id:e.id,name:e.name,country:e.country,lon:e.lon,lat:e.lat,isFavorite:!0})}),this.setState(function(e){return e.isFavorite=!e.isFavorite}))}},{key:"showFavoriteCity",value:function(e){this.fetchData({name:"id",id:e.id}),e.history.push("/")}},{key:"loadDefaultCity",value:function(){var e=this;"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(t){e.fetchData({name:"geo",lat:t.coords.latitude,lon:t.coords.longitude})},function(t){console.log(t),e.fetchData({name:"id",id:J.id})}):console.log("geolocation is not allowed")}},{key:"componentDidMount",value:function(){this.loadDefaultCity()}},{key:"componentDidUpdate",value:function(e){localStorage.setItem("favorites",JSON.stringify(this.state.favorites))}},{key:"render",value:function(){var e=this;return c.a.createElement(f.a,null,c.a.createElement(v.a,{exact:!0,path:"/",render:function(t){return c.a.createElement("div",{className:"App"},c.a.createElement(g,{loadDefaultCity:e.loadDefaultCity,searchClick:e.searchClick}),e.state.loading&&c.a.createElement(_,null),e.state.error&&c.a.createElement("div",null,"No data available"),!e.state.loading&&!e.state.error&&c.a.createElement(O,{id:e.state.id,name:e.state.name,country:e.state.country,isFavorite:e.state.isFavorite,weather:e.state.weather,clickHandler:e.favoritesHandler}))}}),c.a.createElement(v.a,{path:"/favorites"},c.a.createElement("div",{className:"App"},c.a.createElement(N,null),c.a.createElement(j,{favorites:this.state.favorites,favoritesHandler:this.favoritesHandler,showFavoriteCity:this.showFavoriteCity}))))}}]),t}(r.Component);l.a.render(c.a.createElement(i.a,{basename:"/weatherapp"},c.a.createElement(q,null)),document.getElementById("root"))}},[[28,2,1]]]);
//# sourceMappingURL=main.5fe1fef5.chunk.js.map